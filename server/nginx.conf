server {
    listen 80;
    server_name _;
    root /var/www/fitboy;
    
    # Disable directory listing
    autoindex off;
    
    # Only serve specific files
    location = /repacks.db {
        add_header Access-Control-Allow-Origin *;
        add_header Cache-Control "no-cache, must-revalidate";
        add_header Content-Type "application/x-sqlite3";
    }
    
    location = /metadata.json {
        add_header Access-Control-Allow-Origin *;
        add_header Cache-Control "no-cache, must-revalidate";
        add_header Content-Type "application/json";
    }
    
    # Block everything else
    location / {
        return 404;
    }
    
    # Logs
    access_log /var/log/nginx/fitboy_access.log;
    error_log /var/log/nginx/fitboy_error.log;
}

